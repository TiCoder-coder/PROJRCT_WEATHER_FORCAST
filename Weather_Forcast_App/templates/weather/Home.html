{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>B·∫£ng ƒëi·ªÅu khi·ªÉn D·ª± b√°o Th·ªùi ti·∫øt</title>
    <link rel="stylesheet" href="{% static 'weather/css/Home.css' %}?v=5821170">

</head>
<body class="home-page">


    <!-- THANH ƒêI·ªÄU H∆Ø·ªöNG TR√äN -->
    <header class="home-header">
        <div class="logo">
            <span class="logo-dot"></span>
            <span class="logo-text">VN Weather Hub</span>
        </div>
        <nav class="home-nav">
            <button type="button" class="nav-pill" id="btnIntro">Gi·ªõi thi·ªáu</button>
        </nav>
    </header>

    <!-- HERO -->
     
    <section class="hero">
        <div class="hero-overlay"></div>
        <div class="wind-layer" aria-hidden="true">
            <span class="wind w1"></span>
            <span class="wind w2"></span>
            <span class="wind w3"></span>
            <span class="wind w4"></span>
            <span class="wind w5"></span>
        </div>
        <div class="hero-anim" aria-hidden="true">
            <!-- M·∫∂T TR·ªúI -->
            <div class="wx wx-sun">
                <svg class="wx-svg" viewBox="0 0 120 120">
                <g class="sun-rays">
                    <line x1="60" y1="8"  x2="60" y2="22"></line>
                    <line x1="60" y1="98" x2="60" y2="112"></line>
                    <line x1="8"  y1="60" x2="22" y2="60"></line>
                    <line x1="98" y1="60" x2="112" y2="60"></line>
                    <line x1="18" y1="18" x2="28" y2="28"></line>
                    <line x1="92" y1="92" x2="102" y2="102"></line>
                    <line x1="18" y1="102" x2="28" y2="92"></line>
                    <line x1="92" y1="28" x2="102" y2="18"></line>
                </g>
                <circle class="sun-core" cx="60" cy="60" r="22"></circle>
                </svg>
            </div>

            <!-- M√ÇY -->
            <div class="wx wx-cloud">
                <svg class="wx-svg" viewBox="0 0 220 140">
                <path class="cloud-fill"
                    d="M78 106h92c18 0 32-12 32-28s-14-28-32-28c-2 0-4 0-6 .3C156 30 139 16 118 16
                    92 16 71 35 71 60c0 1.3.1 2.6.2 3.8C52 66 38 80 38 97c0 16 13 29 40 29z"/>
                <path class="cloud-stroke"
                    d="M78 106h92c18 0 32-12 32-28s-14-28-32-28c-2 0-4 0-6 .3C156 30 139 16 118 16
                    92 16 71 35 71 60c0 1.3.1 2.6.2 3.8C52 66 38 80 38 97c0 16 13 29 40 29z"/>
                </svg>
            </div>

            <!-- M∆ØA -->
            <div class="wx wx-rain">
                <svg class="wx-svg" viewBox="0 0 240 170">
                <path class="cloud-fill"
                    d="M86 112h102c20 0 36-13 36-31s-16-31-36-31c-2 0-4 0-7 .4C175 27 156 12 132 12
                    102 12 78 34 78 61c0 1.5.1 3 .3 4.4C56 68 40 84 40 103c0 18 15 33 46 33z"/>
                <path class="cloud-stroke"
                    d="M86 112h102c20 0 36-13 36-31s-16-31-36-31c-2 0-4 0-7 .4C175 27 156 12 132 12
                    102 12 78 34 78 61c0 1.5.1 3 .3 4.4C56 68 40 84 40 103c0 18 15 33 46 33z"/>

                <g class="rain-lines">
                    <line x1="88"  y1="124" x2="78"  y2="156"></line>
                    <line x1="120" y1="124" x2="110" y2="162"></line>
                    <line x1="152" y1="124" x2="142" y2="156"></line>
                    <line x1="184" y1="124" x2="174" y2="162"></line>
                </g>
                </svg>
            </div>

            <!-- TR√ÅI ƒê·∫§T (xoay) -->
            <div class="earth-wrap">
                <div class="earth"></div>
                <div class="earth-orbit"></div>
            </div>

            </div>

        <!-- BI·ªÇU T∆Ø·ª¢NG TH·ªúI TI·∫æT (ƒë·ªông) -->
        <div class="hero-weather" aria-hidden="true">
            <!-- M·∫∂T TR·ªúI -->
            <div class="wx wx-sun">
            <svg class="wx-svg" viewBox="0 0 120 120">
                <g class="sun-rays">
                <line x1="60" y1="6"  x2="60" y2="20"></line>
                <line x1="60" y1="100" x2="60" y2="114"></line>
                <line x1="6"  y1="60" x2="20" y2="60"></line>
                <line x1="100" y1="60" x2="114" y2="60"></line>

                <line x1="18" y1="18" x2="28" y2="28"></line>
                <line x1="92" y1="92" x2="102" y2="102"></line>
                <line x1="18" y1="102" x2="28" y2="92"></line>
                <line x1="92" y1="28" x2="102" y2="18"></line>

                <line x1="34" y1="10" x2="40" y2="24"></line>
                <line x1="86" y1="96" x2="80" y2="110"></line>
                <line x1="10" y1="86" x2="24" y2="80"></line>
                <line x1="96" y1="34" x2="110" y2="40"></line>
                </g>
                <circle class="sun-core" cx="60" cy="60" r="18"></circle>
            </svg>
            </div>

            <!-- M√ÇY -->
            <div class="wx wx-cloud">
            <svg class="wx-svg" viewBox="0 0 220 140">
                <path class="cloud-shape"
                    d="M78 104h92c18 0 32-12 32-28 0-15-12-27-28-28
                        -4-20-22-35-44-35-18 0-33 9-40 22
                        -3-1-7-2-11-2-18 0-33 14-33 31
                        0 3 0 6 1 9C32 78 20 89 20 104c0 16 14 28 31 28h27z"/>
            </svg>
            </div>

            <!-- M∆ØA -->
            <div class="wx wx-rain">
            <svg class="wx-svg" viewBox="0 0 220 180">
                <path class="cloud-shape"
                    d="M78 86h92c18 0 32-12 32-28 0-15-12-27-28-28
                        -4-20-22-35-44-35-18 0-33 9-40 22
                        -3-1-7-2-11-2-18 0-33 14-33 31
                        0 3 0 6 1 9C32 60 20 71 20 86c0 16 14 28 31 28h27z"/>
                <g class="rain-drops">
                <line x1="70"  y1="120" x2="60"  y2="150"></line>
                <line x1="105" y1="120" x2="95"  y2="155"></line>
                <line x1="140" y1="120" x2="130" y2="150"></line>
                <line x1="175" y1="120" x2="165" y2="155"></line>
                </g>
            </svg>
            </div>
        </div>

        <div class="hero-content">
            <h1>D·ªØ li·ªáu th·ªùi ti·∫øt Vi·ªát Nam th·ªùi gian th·ª±c</h1>
            <p>
                Thu th·∫≠p, h·ª£p nh·∫•t v√† tr·ª±c quan h√≥a d·ªØ li·ªáu th·ªùi ti·∫øt t·ª´ Vrain v√† API/HTML c·ªßa OpenWeather trong m·ªôt b·∫£ng ƒëi·ªÅu khi·ªÉn.
            </p>
            <div class="hero-actions">
                <button type="button" class="btn primary" id="btnOpenCrawlModal">
                    B·∫Øt ƒë·∫ßu thu th·∫≠p Vrain
                </button>
                <a class="btn secondary" href="{% url 'weather:datasets' %}">
                    B·ªô d·ªØ li·ªáu g·∫ßn ƒë√¢y
                </a>
                <button type="button" class="btn secondary btn-help" id="btnOpenHelpModal">
                    H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng
                </button>

            </div>

            <div class="hero-meta">
                <div class="meta-item">
                    <span class="meta-label">C·∫≠p nh·∫≠t l·∫ßn cu·ªëi</span>
                    <span class="meta-value">
                        {{ latest_dataset_time|default:"‚Äî" }}
                    </span>
                </div>
            </div>
        </div>

    </section>

    <!-- PH·∫¶N T·ªîNG QUAN -->
    <section id="overview" class="section overview">
        <h2>T·ªïng quan v·ªÅ c√°c pipeline</h2>
        <p class="section-desc">
            M·ªói pipeline t∆∞∆°ng ·ª©ng v·ªõi m·ªôt ngu·ªìn d·ªØ li·ªáu: API qu·ªëc t·∫ø, HTML c·ªßa Vrain, ho·∫∑c OpenWeather.
        </p>

        <div class="cards">
            <div class="card">
                <div class="card-icon">
                    <img src="{% static 'weather/img/icons/api.svg' %}"
                         alt="Bi·ªÉu t∆∞·ª£ng API"
                         onerror="this.style.display='none'">
                </div>
                <h3>API OpenWeather</h3>
                <p>
                    S·ª≠ d·ª•ng API ƒë·ªÉ l·∫•y d·ªØ li·ªáu th·ªùi ti·∫øt th·ªùi gian th·ª±c nh∆∞ nhi·ªát ƒë·ªô, ƒë·ªô ·∫©m, gi√≥,
                    ƒë·ªô che ph·ªß m√¢y v√† c√°c d·ªØ li·ªáu kh√°c cho to√†n b·ªô l√£nh th·ªï Vi·ªát Nam.
                </p>
            </div>

            <div class="card">
                <div class="card-icon">
                    <img src="{% static 'weather/img/icons/vrain.svg' %}"
                         alt="Bi·ªÉu t∆∞·ª£ng Vrain"
                         onerror="this.style.display='none'">
                </div>
                <h3>Vrain ‚Äì HTML/Selenium</h3>
                <p>
                    Crawl d·ªØ li·ªáu l∆∞·ª£ng m∆∞a t·∫°i t·ª´ng tr·∫°m/vin t·ª´ trang web Vrain b·∫±ng Selenium,
                    v√† l∆∞u th√†nh file CSV/Excel ƒë·ªÉ ph√¢n t√≠ch.
                </p>
            </div>

            <div class="card">
                <div class="card-icon">
                    <img src="{% static 'weather/img/icons/report.svg' %}"
                         alt="Bi·ªÉu t∆∞·ª£ng B√°o c√°o"
                         onerror="this.style.display='none'">
                </div>
                <h3>H·ª£p nh·∫•t & B·∫£ng ƒëi·ªÅu khi·ªÉn</h3>
                <p>
                    K·∫øt h·ª£p d·ªØ li·ªáu t·ª´ nhi·ªÅu ngu·ªìn, xu·∫•t ra Excel, v√† chu·∫©n b·ªã cho vi·ªác tr·ª±c quan h√≥a
                    b·∫±ng Power BI / Grafana / Bi·ªÉu ƒë·ªì web.
                </p>
            </div>
        </div>
    </section>

    <!-- PH·∫¶N B·ªò D·ªÆ LI·ªÜU -->
    <section id="datasets" class="section datasets">
        <h2>C√°c l·∫ßn thu th·∫≠p d·ªØ li·ªáu g·∫ßn ƒë√¢y</h2>

        <div class="dataset-grid">
            <div class="dataset-card">
                <h3>API OpenWeather</h3>
                <p>S·ªë l·∫ßn ch·∫°y: {{ total_api_runs|default:0 }}</p>
                <span class="badge badge-api">API</span>
            </div>

            <div class="dataset-card">
                <h3>Thu th·∫≠p Vrain</h3>
                <p>S·ªë l·∫ßn ch·∫°y: {{ total_vrain_runs|default:0 }}</p>
                <span class="badge badge-vrain">VRAIN</span>
            </div>

        </div>
    </section>

        <!-- ========== MODAL CH·ªåN C√ÅCH THU TH·∫¨P VRAIN ========== -->
    <div id="crawlMethodModal" class="crawl-modal">
        <div class="crawl-modal__overlay" data-close-crawl-modal></div>

        <div class="crawl-modal__content">
            <header class="crawl-modal__header">
                <h2>Ch·ªçn c√°ch thu th·∫≠p d·ªØ li·ªáu b·∫±ng Vrain.</h2>
                <button type="button"
                        class="crawl-modal__close"
                        data-close-crawl-modal>&times;</button>
            </header>


            <div class="crawl-modal__grid">
                <!-- 1. Crawl_data_by_API.py -->
                <div class="crawl-card">
                    <h3>1. Thu th·∫≠p qua API OpenWeather</h3>
                    <ul class="crawl-card__list">
                        <li>L·∫•y d·ªØ li·ªáu th·ªùi ti·∫øt t·ª´ c√°c API qu·ªëc t·∫ø (nhi·ªát ƒë·ªô, ƒë·ªô ·∫©m, gi√≥, m∆∞a, v.v.).</li>
                        <li>Ph√π h·ª£p ƒë·ªÉ c√≥ c√°i nh√¨n t·ªïng qu√°t tr√™n to√†n qu·ªëc.</li>
                    </ul>
                    <button type="button"
                            class="crawl-card__btn"
                            data-crawl-method="api_weather"
                            data-crawl-label="Crawl_data_by_API.py">
                        Ch·ªçn ph∆∞∆°ng ph√°p n√†y
                    </button>
                </div>

                <!-- 2. Crawl_data_from_Vrain_by_API.py -->
                <div class="crawl-card">
                    <h3>2. Thu th·∫≠p qua API c·ªßa Vrain</h3>
                    <ul class="crawl-card__list">
                        <li>L·∫•y d·ªØ li·ªáu l∆∞·ª£ng m∆∞a tr·ª±c ti·∫øp t·ª´ API (n·∫øu Vrain cung c·∫•p).</li>
                        <li>·ªîn ƒë·ªãnh, √≠t ph·ª• thu·ªôc v√†o giao di·ªán HTML.</li>
                    </ul>
                    <button type="button"
                            class="crawl-card__btn"
                            data-crawl-method="vrain_api"
                            data-crawl-label="Crawl_data_from_Vrain_by_API.py">
                        Ch·ªçn ph∆∞∆°ng ph√°p n√†y
                    </button>
                </div>

                <!-- 3. Crawl_data_from_Vrain_by_Selenium.py -->
                <div class="crawl-card">
                    <h3>3. Thu th·∫≠p Vrain b·∫±ng Selenium (multi-ID)</h3>
                    <ul class="crawl-card__list">
                        <li>S·ª≠ d·ª•ng Selenium ƒëi·ªÅu khi·ªÉn tr√¨nh duy·ªát v√† ƒë·ªçc giao di·ªán Vrain.</li>
                        <li>Ph√π h·ª£p khi thu th·∫≠p nhi·ªÅu t·ªânh/tr·∫°m c√πng l√∫c.</li>
                    </ul>
                    <button type="button"
                            class="crawl-card__btn"
                            data-crawl-method="vrain_selenium"
                            data-crawl-label="Crawl_data_from_Vrain_by_Selenium.py">
                        Ch·ªçn ph∆∞∆°ng ph√°p n√†y
                    </button>
                </div>

                <!-- 4. Crawl_data_from_html_of_Vrain.py -->
                <div class="crawl-card">
                    <h3>4. Thu th·∫≠p HTML Vrain (ph√¢n t√≠ch ngu·ªìn)</h3>
                    <ul class="crawl-card__list">
                        <li>ƒê·ªçc HTML v√† s·ª≠ d·ª•ng regex ƒë·ªÉ tr√≠ch xu·∫•t d·ªØ li·ªáu l∆∞·ª£ng m∆∞a cho t·ª´ng tr·∫°m.</li>
                        <li>Ph√π h·ª£p khi c·∫ßn tinh ch·ªânh logic ph√¢n t√≠ch HTML.</li>
                    </ul>
                    <button type="button"
                            class="crawl-card__btn"
                            data-crawl-method="vrain_html"
                            data-crawl-label="Crawl_data_from_html_of_Vrain.py">
                        Ch·ªçn ph∆∞∆°ng ph√°p n√†y
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- ========== MODAL H∆Ø·ªöNG D·∫™N S·ª¨ D·ª§NG ========== -->
    <div id="helpModal" class="crawl-modal">
        <div class="crawl-modal__overlay" data-close-help-modal></div>

        <div class="crawl-modal__content">
            <header class="crawl-modal__header">
                <h2>üìò H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng VN Weather Hub</h2>
                <button type="button"
                        class="crawl-modal__close"
                        data-close-help-modal>&times;</button>
            </header>

            <div class="help-grid">
                <div class="help-card">
                    <h3>1) Trang ch·ªß (B·∫£ng ƒëi·ªÅu khi·ªÉn)</h3>
                    <ul>
                        <li>Nh·∫•n <b>B·∫Øt ƒë·∫ßu thu th·∫≠p Vrain</b> ƒë·ªÉ ch·ªçn pipeline thu th·∫≠p.</li>
                        <li>Cu·ªôn xu·ªëng <b>T·ªïng quan v·ªÅ c√°c pipeline</b> ƒë·ªÉ xem m√¥ t·∫£ t·ª´ng pipeline.</li>
                        <li>Cu·ªôn xu·ªëng <b>C√°c l·∫ßn thu th·∫≠p d·ªØ li·ªáu g·∫ßn ƒë√¢y</b> ƒë·ªÉ xem s·ªë l·∫ßn ch·∫°y c·ªßa m·ªói pipeline.</li>
                    </ul>
                </div>

                <div class="help-card">
                    <h3>2) Thu th·∫≠p OpenWeather b·∫±ng API</h3>
                    <ul>
                        <li>V√†o trang <b>Thu th·∫≠p OpenWeather b·∫±ng API</b>.</li>
                        <li>Nh·∫•n <b>B·∫Øt ƒë·∫ßu thu th·∫≠p Vrain</b> ƒë·ªÉ ch·∫°y script.</li>
                        <li>Logs s·∫Ω hi·ªÉn th·ªã theo th·ªùi gian th·ª±c (n·∫øu backend b·∫≠t logging).</li>
                        <li>Khi k·∫øt th√∫c, file s·∫Ω ƒë∆∞·ª£c xu·∫•t sang th∆∞ m·ª•c <code>output/</code>.</li>
                    </ul>
                </div>

                <div class="help-card">
                    <h3>3) Thu th·∫≠p Vrain b·∫±ng API</h3>
                    <ul>
                        <li>V√†o trang <b>Thu th·∫≠p Vrain b·∫±ng API</b>.</li>
                        <li>Nh·∫•n <b>B·∫Øt ƒë·∫ßu thu th·∫≠p Vrain</b> ƒë·ªÉ ch·∫°y v√† theo d√µi logs.</li>
                        <li>Khi k·∫øt th√∫c, file xu·∫•t ra s·∫Ω n·∫±m trong <code>output/</code>.</li>
                    </ul>
                </div>

                <div class="help-card">
                    <h3>4) Thu th·∫≠p Vrain b·∫±ng Selenium / Ph√¢n t√≠ch HTML</h3>
                    <ul>
                        <li><b>Selenium</b>: Ph√π h·ª£p ƒë·ªÉ thu th·∫≠p theo giao di·ªán / nhi·ªÅu ID.</li>
                        <li><b>Ph√¢n t√≠ch HTML</b>: Ph√π h·ª£p ƒë·ªÉ tinh ch·ªânh logic khi ph√¢n t√≠ch source HTML.</li>
                        <li>Nh·∫•n <b>B·∫Øt ƒë·∫ßu thu th·∫≠p Vrain</b> v√† xem logs theo th·ªùi gian th·ª±c.</li>
                    </ul>
                </div>

                <div class="help-card help-card--wide">
                    <h3>5) B·ªô d·ªØ li·ªáu</h3>
                    <ul>
                        <li>V√†o trang <b>B·ªô d·ªØ li·ªáu</b> ƒë·ªÉ xem c√°c file trong <code>output/</code>.</li>
                        <li>C√≥ th·ªÉ <b>Xem</b> ho·∫∑c <b>T·∫£i xu·ªëng</b> t√πy theo file.</li>
                    </ul>
                </div>
            </div>

            <div class="help-actions">
                <button type="button" class="btn primary" data-close-help-modal>
                    Hi·ªÉu r·ªìi
                </button>
            </div>
        </div>
    </div>


    <footer class="home-footer">
        <span>¬© {{ now|default:"2025" }} D·ª± √°n D·ª± b√°o Th·ªùi ti·∫øt ‚Äî X√¢y d·ª±ng b·∫±ng Django</span>
    </footer>

<script src="{% static 'weather/js/Home.js' %}?v=96579"></script>

<div id="introModal" class="crawl-modal" aria-hidden="true">
  <div class="crawl-modal__overlay" data-close-intro-modal></div>

  <div class="crawl-modal__content intro-modal__content" role="dialog" aria-modal="true">
    <header class="crawl-modal__header">
      <h2>Gi·ªõi thi·ªáu VN Weather Hub</h2>
      <button type="button" class="crawl-modal__close" data-close-intro-modal>&times;</button>
    </header>

    <p class="crawl-modal__subtitle">
      B·∫£ng ƒëi·ªÅu khi·ªÉn thu th·∫≠p v√† qu·∫£n l√Ω d·ªØ li·ªáu th·ªùi ti·∫øt t·ª´ nhi·ªÅu ngu·ªìn (API + Vrain) trong m·ªôt n∆°i.
    </p>

    <div class="intro-body">
      <div class="intro-block">
        <h3>üéØ D·ª± √°n n√†y l√†m g√¨?</h3>
        <ul>
          <li>Thu th·∫≠p d·ªØ li·ªáu th·ªùi ti·∫øt theo pipeline b·∫°n ch·ªçn.</li>
          <li>L∆∞u file k·∫øt qu·∫£ v√†o th∆∞ m·ª•c <code>output/</code>.</li>
          <li>Xem v√† t·∫£i xu·ªëng b·ªô d·ªØ li·ªáu tr·ª±c ti·∫øp ·ªü m·ª•c <b>B·ªô d·ªØ li·ªáu</b>.</li>
        </ul>
      </div>

      <div class="intro-block">
        <h3>üß© C√°c pipeline hi·ªán c√≥</h3>
        <ul>
          <li><b>API OpenWeather</b>: l·∫•y nhi·ªát ƒë·ªô/ƒë·ªô ·∫©m/gi√≥...</li>
          <li><b>Vrain HTML/Selenium</b>: thu th·∫≠p d·ªØ li·ªáu l∆∞·ª£ng m∆∞a t·ª´ Vrain.</li>
          <li><b>API Vrain</b>: L·∫•y d·ªØ li·ªáu l∆∞·ª£ng m∆∞a th√¥ng qua API (n·∫øu c√≥).</li>
        </ul>
      </div>

      <div class="intro-block">
        <h3>üìå C√°ch d√πng nhanh</h3>
        <ol>
          <li>Ch·ªçn pipeline b·∫°n mu·ªën ch·∫°y.</li>
          <li>Nh·∫•n <b>B·∫Øt ƒë·∫ßu thu th·∫≠p Vrain</b> v√† xem logs theo th·ªùi gian th·ª±c.</li>
          <li>V√†o <b>B·ªô d·ªØ li·ªáu</b> ƒë·ªÉ xem/t·∫£i file m·ªõi nh·∫•t.</li>
        </ol>
      </div>

      <div class="intro-block">
        <h3>üí° G·ª£i √Ω</h3>
        <ul>
          <li>N·∫øu logs kh√¥ng hi·ªÉn th·ªã ngay: ki·ªÉm tra xem script c√≥ in log/flush kh√¥ng.</li>
          <li>Qu√° tr√¨nh k·∫øt th√∫c nh∆∞ng file kh√¥ng th·∫•y: ki·ªÉm tra ƒë∆∞·ªùng d·∫´n file <code>output/</code>.</li>
        </ul>
      </div>
    </div>

    <div class="intro-actions">
      <button type="button" class="btn secondary" data-close-intro-modal>ƒê√≥ng</button>
    </div>
  </div>
</div>

</body>
</html>